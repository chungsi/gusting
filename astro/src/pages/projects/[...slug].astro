---
import ProjectHeader from '@components/ProjectHeader.astro'
import type { GetStaticPaths } from 'astro'
import type { CollectionEntry } from 'astro:content'
import { getCollection } from 'astro:content'
import ContentLayout from 'src/layouts/ContentLayout.astro'

export const getStaticPaths = (async () => {
  const projects = await getCollection('projects')
  return projects.map((project) => ({
    params: {
      // This creates a path/page for collection entry
      slug: project.slug,
    },
    props: {
      project,
    },
  }))
}) satisfies GetStaticPaths

// type Params = InferGetStaticParamsType<typeof getStaticPaths>
// type Props = InferGetStaticPropsType<typeof getStaticPaths>
type Props = { project: CollectionEntry<'projects'> }

const { project } = Astro.props as Props
const { Content, headings } = await project.render()

const data = project.data
---

<ContentLayout bodyClassName={data.category}>
  <ProjectHeader project={data} slot='header' />

  <Content />
</ContentLayout>
