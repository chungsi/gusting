---
import generateToc from '@utils/generateToc'

import ProjectTocItem from './ProjectTocItem.astro'

import type { MarkdownHeading } from 'astro'

type Props = {
  headings: MarkdownHeading[]
  maxDepth?: number
  class?: string
}

const { headings, maxDepth = 2, class: className }: Props = Astro.props

let printHeadings = headings.filter((heading) => heading.depth <= maxDepth)
let toc = generateToc(printHeadings)
---

<menu class:list={['border-l pr-4 pl-2 text-sm', className]}>
  {toc.map((heading) => <ProjectTocItem heading={heading} />)}
</menu>
