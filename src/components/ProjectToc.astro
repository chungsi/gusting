---
import generateToc from '@utils/generateToc'
import clsx from 'clsx'

import ProjectTocItem from './ProjectTocItem.astro'

import type { MarkdownHeading } from 'astro'

type Props = {
  headings: MarkdownHeading[]
  maxDepth?: number
  class?: string
}

const { headings, maxDepth = 2, class: className }: Props = Astro.props

let printHeadings = headings.filter((heading) => heading.depth <= maxDepth)
let toc = generateToc(printHeadings)
---

<menu class={clsx('pl-2 pr-4 border-l text-sm', className)}>
  {toc.map((heading) => <ProjectTocItem heading={heading} />)}
</menu>
